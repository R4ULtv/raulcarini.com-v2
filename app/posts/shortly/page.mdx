import TopNavPost from "@/components/TopNavPost";
import Image from "next/image";

import home from "@/public/assets/shortly/home-page.png";
import route from "@/public/assets/shortly/route-segments-to-path-segments.png";
import file from "@/public/assets/shortly/page-special-file.png";

export const title = "Shortly - Raul Carini";
export const description =
  "A URL Shortening Service: Convert lengthy URLs into concise and easy-to-share links.";
export const createdAt = new Date("2024-04-24");

export const metadata = {
  metadataBase: process.env.HOST_NAME,
  title: title,
  description: description,
  openGraph: {
    title: title,
    description: description,
    url: new URL(`${process.env.HOST_NAME}/posts/shortly`),
    images: [
      {
        url: `${process.env.HOST_NAME}/api/dynamic-og?title=Shortly&description=A%20URL%20Shortening%20Service`,
        width: 843,
        height: 441,
      },
    ],
  },
};

<TopNavPost title={"Shortly"} date={createdAt} />

<Image
  src={home}
  width={854}
  height={480}
  quality={100}
  placeholder="blur"
  alt="Shortly home page"
/>

Shortly is a web service that allows you to shorten **long and complex URLs** into **short and memorable links**.
In simple terms, Shortly acts as an intermediary between the end user and the desired destination.
When a user clicks on a shortened link generated by Shortly, they are automatically redirected to the original URL.
For example, if I have a link https://example.com/aVeryLongLink it could become [shrly.cc/xZVl](https://shrly.cc/xZVl).

## What was the inspiration behind Shortly?

Shortly began as a small summer project, born out of a personal challenge to _replicate_ the functionality of established URL shortening services like [bit.ly](https://bitly.com_).
It was a way for me to test my skills and delve into the intricacies of web development.
My goal was to create a comprehensive application that encompassed all aspects of web programming, from the user-facing front-end to the intricate back-end that powers the site.
Along the way, I encountered a multitude of challenges that needed to be addressed:

- **Database**: Selecting the most suitable database type, considering factors like cost, ease of implementation, and scalability.

- **Authentication**: Implementing a robust user authentication system, defining roles and access permissions.

- **Payments**: Integrating a payment gateway to handle subscription plans and recurring payments.

These are just a few examples of the hurdles I faced. What initially seemed like a straightforward task of building a website turned out to be far more complex.
However, I remained undeterred. My approach was to break down the project into smaller, manageable steps, even if I couldn't always complete them all in one sitting.
Often, I would focus on a specific aspect, making some progress, before shifting my attention to another area.

We've explored the genesis of Shortly, the initial challenges, and my approach to tackling them. Now, let's delve into the technical details of how I actually brought the website to life.

## How does the website work?

For the website to function, we need to consider two main factors: the front-end and the back-end.
Front-end refers to everything that the user sees and interacts with on a website or application.
It is the "visible" part that gives the user a pleasant and intuitive experience.
The main languages for this task are HTML, CSS, and JavaScript.
Normally, React is used for easy and efficient management.

**What is React?** React is an open-source JavaScript library created by Facebook for building dynamic and interactive user interfaces (UIs).
In simple terms, React is a tool for easily creating the front-end of a website.

> As for the back-end, Node.js is definitely the most popular option.
> However, there are other popular frameworks such as Django (Python) and Laravel (PHP).

**But what is Node.js?** Node.js is a runtime environment for the JavaScript programming language.
It allows you to create fast, scalable, and real-time server-side applications.
In other words, Node.js is used to execute JavaScript code on the server-side.

**Okay, but then how was Shortly programmed?** Given the "simplicity" of this project, it was not necessary to have separate environments (front-end and back-end).
For this reason, I decided to use Next.js, which combines all the advantages of React and Node.js.

### How does Next Js work ?

But first, let's take a closer look at what Next.js actually is.
Next.js is a React-based web development framework that simplifies and speeds up the creation of modern websites and web applications.

Think of Next.js as a supercharger for React that offers several additional features, such as:

1. Server-side rendering (SSR) for faster pages and a better user experience
2. Preconfigured routing for easy navigation
3. Support for static sites for content that doesn't change frequently
4. Preloading capabilities for faster loading
5. Built-in support for REST APIs for data management

In simple terms, Next.js helps you build React websites and web applications faster, easier, and more performantly.
Okay, now let's take a look at how to create and run a Next.js project.
First, you need to have Node.js installed on your computer.
Then, run the following command in the terminal: 

```terminal
npx create-next-app@latest
```

This command will automatically install all the dependencies and files needed to run the project.

Once the installation is complete, you will find several files and folders.
For now, we will focus on the app folder. Inside this folder, we will manage all the *routes* of our website.

<Image
  src={route}
  width={854}
  height={480}
  quality={100}
  placeholder="blur"
  alt="Route segments to path segments"
/>

Each page is represented by its own folder and a file called `page.js`.

<Image
  src={file}
  width={854}
  height={480}
  quality={100}
  placeholder="blur"
  alt="page.js special file"
/>

Once you understand this, the rest is relatively simple. We need to keep in mind that in our case the folder must be dynamic.
As we saw earlier, a URL like https://shrly.cc/xZVl might suggest the presence of a folder called `xZV1`.
However, this is not the case, otherwise we would have to manually create hundreds or thousands of folders to handle the desired redirection.

For this reason, Next.js offers dynamic pages.
We can use a folder like `[id]`, which always contains a `page.js` file.
This system allows us to use the ID (in this case, `xZV1`) to retrieve from the database the URL to which to redirect the user.
